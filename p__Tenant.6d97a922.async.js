(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[819],{12444:function(ue,N,s){"use strict";s.r(N),s.d(N,{default:function(){return Ie}});var Q=s(57663),U=s(71577),C=s(11849),z=s(77576),H=s(12028),re=s(34792),$=s(48086),u=s(3182),j=s(71194),V=s(50146),d=s(2824),le=s(94043),a=s.n(le),P=s(67294),ce=s(80853),oe=s(70667),X=s(57119),de=s(49101),fe=s(73171),D=s(63876),I=s(21010),me=function(){var v=(0,u.Z)(a().mark(function t(r){return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r.extraProperties||(r.extraProperties={}),e.next=3,(0,I.WY)("".concat(Identity_API,"api/multi-tenancy/tenants"),{method:"Post",data:r});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},t)}));return function(r){return v.apply(this,arguments)}}(),pe=function(){var v=(0,u.Z)(a().mark(function t(r){return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,I.WY)("".concat(Identity_API,"api/multi-tenancy/tenants/").concat(r),{method:"Delete"});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t)}));return function(r){return v.apply(this,arguments)}}(),ve=function(){var v=(0,u.Z)(a().mark(function t(r){return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,I.WY)("".concat(Identity_API,"api/v1/Tenant/keys"),{method:"Delete",data:r});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t)}));return function(r){return v.apply(this,arguments)}}(),he=function(){var v=(0,u.Z)(a().mark(function t(r){return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,I.WY)("".concat(Identity_API,"api/v1/Tenant/").concat(r,"/Recover"),{method:"Put"});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t)}));return function(r){return v.apply(this,arguments)}}(),ge=function(){var v=(0,u.Z)(a().mark(function t(r,h){return a().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,(0,I.WY)("".concat(Identity_API,"api/multi-tenancy/tenants/").concat(r),{method:"Put",data:h});case 2:return g.abrupt("return",g.sent);case 3:case"end":return g.stop()}},t)}));return function(r,h){return v.apply(this,arguments)}}(),ye=function(){var v=(0,u.Z)(a().mark(function t(r){return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,I.WY)("".concat(Identity_API,"api/v1/Tenant"),{method:"Get",params:r});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t)}));return function(r){return v.apply(this,arguments)}}(),Me=function(){var v=(0,u.Z)(a().mark(function t(r){return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,I.WY)("".concat(Identity_API,"api/multi-tenancy/tenants/").concat(r),{method:"Get"});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t)}));return function(r){return v.apply(this,arguments)}}(),Re=null,Be=null,Pe=s(952),De=s(37476),_=s(5966),n=s(85893),Te=function(t){var r=t.operator,h=t.visible,e=t.current,g=t.onCancel,L=t.onSubmit,J=t.children,q=(0,P.useState)(),k=(0,d.Z)(q,2),R=k[0],f=k[1],y=(0,I.YB)(),ee=(0,P.useState)(),B=(0,d.Z)(ee,2),te=B[0],ae=B[1],ne=function(){var M=(0,u.Z)(a().mark(function F(A){var G,W,S,O;return a().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:if(A.extraProperties=te,!e){T.next=9;break}return G=Object.assign(e,A),T.next=5,ge(e.id,G);case 5:W=T.sent,W&&L(W),T.next=14;break;case 9:return S=A,T.next=12,me(S);case 12:O=T.sent,O&&L(O);case 14:case"end":return T.stop()}},F)}));return function(A){return M.apply(this,arguments)}}(),Y=(0,P.useMemo)(function(){var M=y.formatMessage({id:"DisplayName:Tenant",defaultMessage:""});switch(r){case D.cI.Add:M="".concat(M," ").concat(y.formatMessage({id:"Permission:Create",defaultMessage:"\u521B\u5EFA"}));break;case D.cI.Edit:M="".concat(M," ").concat(y.formatMessage({id:"Permission:Edit",defaultMessage:"\u7F16\u8F91"}));break;case D.cI.Detail:M="".concat(M," ").concat(y.formatMessage({id:"Permission:Detail",defaultMessage:"\u8BE6\u60C5"}));break;default:break}return M},[y,r]);return(0,P.useEffect)(function(){f(Y),ae(e==null?void 0:e.extraProperties)},[e,Y]),!e&&r!=D.cI.Add?(0,n.jsx)(n.Fragment,{}):(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(De.Y,{width:378,visible:h,title:R,onFinish:ne,initialValues:r==D.cI.Add?{}:e,trigger:(0,n.jsx)(n.Fragment,{children:J}),modalProps:{onCancel:function(){return g()},destroyOnClose:!0},submitter:r==D.cI.Detail?!1:{},children:(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(Pe.ZP.Group,{children:[(0,n.jsx)(_.Z,{width:"md",name:"name",label:y.formatMessage({id:"DisplayName:Tenant:Name",defaultMessage:"\u540D\u79F0"}),rules:[{required:!0,message:"".concat(y.formatMessage({id:"form.rules.message",defaultMessage:"\u8BF7\u8F93\u5165"}),"${label}")}]}),r==D.cI.Add&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(_.Z,{width:"md",name:"adminEmailAddress",label:y.formatMessage({id:"DisplayName:IdentityUser:Email",defaultMessage:"\u90AE\u7BB1"}),rules:[{required:!0,message:"".concat(y.formatMessage({id:"form.rules.message",defaultMessage:"\u8BF7\u8F93\u5165"}),"${label}")}]}),(0,n.jsx)(_.Z,{width:"md",name:"adminPassword",label:y.formatMessage({id:"DisplayName:IdentityUser:Password",defaultMessage:"Admin\u5BC6\u7801"}),rules:[{required:!0,message:"".concat(y.formatMessage({id:"form.rules.message",defaultMessage:"\u8BF7\u8F93\u5165"}),"${label}")}]})]})]})})})})},be=Te,we=function(){var t=(0,I.md)(),r=(0,P.useState)(!1),h=(0,d.Z)(r,2),e=h[0],g=h[1],L=(0,P.useState)(D.cI.Detail),J=(0,d.Z)(L,2),q=J[0],k=J[1],R=V.Z.confirm,f=(0,I.YB)(),y=(0,P.useRef)(),ee=(0,P.useState)(0),B=(0,d.Z)(ee,2),te=B[0],ae=B[1],ne=(0,P.useState)([]),Y=(0,d.Z)(ne,2),M=Y[0],F=Y[1],A=(0,P.useState)(void 0),G=(0,d.Z)(A,2),W=G[0],S=G[1],O=function(){var i;(i=y.current)===null||i===void 0||i.reload(),F([])},se=function(){var o=(0,u.Z)(a().mark(function i(){var l;return a().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,(0,D.sQ)();case 2:return l=c.sent,c.abrupt("return",l);case 4:case"end":return c.stop()}},i)}));return function(){return o.apply(this,arguments)}}(),T=function(){var o=(0,u.Z)(a().mark(function i(l,m){return a().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:l.isDeleted?R({icon:(0,n.jsx)(X.Z,{}),content:(0,n.jsx)(n.Fragment,{children:f.formatMessage({id:"ProTable.delete.Recover",defaultMessage:"\u786E\u5B9A\u8981\u6062\u590D\u5417?"})}),onOk:function(){var p=(0,u.Z)(a().mark(function w(){return a().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:return Z.next=2,he(l.id);case 2:O();case 3:case"end":return Z.stop()}},w)}));function x(){return p.apply(this,arguments)}return x}(),onCancel:function(){}}):R({icon:(0,n.jsx)(X.Z,{}),content:(0,n.jsx)(n.Fragment,{children:f.formatMessage({id:"ProTable.delete.Delete",defaultMessage:"\u786E\u5B9A\u8981\u5220\u9664\u5417?"})}),onOk:function(){var p=(0,u.Z)(a().mark(function w(){return a().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:return Z.next=2,pe(l.id);case 2:O();case 3:case"end":return Z.stop()}},w)}));function x(){return p.apply(this,arguments)}return x}(),onCancel:function(){}});case 1:case"end":return b.stop()}},i)}));return function(l,m){return o.apply(this,arguments)}}(),Ze=function(){g(!1)},Oe=function(){g(!1),O()},Ce=function(){k(D.cI.Add),g(!0),S(void 0)},xe=function(){var o=(0,u.Z)(a().mark(function i(){return a().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:M.length>0?R({icon:(0,n.jsx)(X.Z,{}),content:(0,n.jsx)(n.Fragment,{children:f.formatMessage({id:"ProTable.delete.BatchDelete",defaultMessage:"\u786E\u5B9A\u8981\u5220\u9664\u9009\u4E2D\u9879\u5417?"})}),onOk:function(){var c=(0,u.Z)(a().mark(function p(){return a().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return w.next=2,ve(M);case 2:O();case 3:case"end":return w.stop()}},p)}));function b(){return c.apply(this,arguments)}return b}(),onCancel:function(){}}):$.default.warning(f.formatMessage({id:"message.select.required",defaultMessage:"\u8BF7\u9009\u62E9\u64CD\u4F5C\u9879"}));case 1:case"end":return m.stop()}},i)}));return function(){return o.apply(this,arguments)}}(),ie=function(){var o=(0,u.Z)(a().mark(function i(l,m){var c;return a().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return k(l),g(!0),p.next=4,Me(m.id);case 4:c=p.sent,S(c);case 6:case"end":return p.stop()}},i)}));return function(l,m){return o.apply(this,arguments)}}(),je=function(){var o=(0,u.Z)(a().mark(function i(l){return a().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,ie(D.cI.Edit,l);case 2:case"end":return c.stop()}},i)}));return function(l){return o.apply(this,arguments)}}(),Ae=function(){var o=(0,u.Z)(a().mark(function i(l){return a().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,ie(D.cI.Detail,l);case 2:case"end":return c.stop()}},i)}));return function(l){return o.apply(this,arguments)}}();(0,P.useEffect)(function(){S(void 0)},[e]);var Se=[{title:f.formatMessage({id:"DisplayName:Tenant:Name",defaultMessage:""}),dataIndex:"name"},{title:f.formatMessage({id:"JhAbp:IsDeleted",defaultMessage:"\u662F\u5426\u5220\u9664"}),dataIndex:"isDeleted",search:!1,render:function(i,l,m,c){return(0,n.jsx)(H.Z,{disabled:!(t["AbpTenantManagement.Tenants.Recover"]&&t["AbpTenantManagement.Tenants.Delete"]),checked:l.isDeleted,onChange:function(){return T(l,c)}})}},{title:f.formatMessage({id:"JhAbp:CreationTime",defaultMessage:"\u521B\u5EFA\u65F6\u95F4"}),dataIndex:"creationTime",valueType:"dateTime",search:!1,sorter:!0},{title:f.formatMessage({id:"JhAbp:Operation",defaultMessage:"\u64CD\u4F5C"}),key:"option",valueType:"option",render:function(i,l){return!l.isDeleted&&[t["AbpTenantManagement.Tenants.Update"]&&(0,n.jsx)("a",{onClick:function(){return je(l)},children:f.formatMessage({id:"Permission:Edit",defaultMessage:"\u7F16\u8F91"})},"edit"),(0,n.jsx)("a",{onClick:function(){return Ae(l)},children:f.formatMessage({id:"Permission:Detail",defaultMessage:"\u8BE6\u60C5"})},"detail")]}},{title:f.formatMessage({id:"JhAbp:IsDeleted",defaultMessage:"\u662F\u5426\u5220\u9664"}),dataIndex:"deleted",hideInTable:!0,valueType:"select",initialValue:2,request:se}],Ee=function(){var o=(0,u.Z)(a().mark(function i(l,m){var c,b,p,x,w,K;return a().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:c=[],b=new Object(m);for(p in b)b.hasOwnProperty(p)&&(x=m[p],c.push("".concat(p," ").concat(x.replace("end",""))));return w=(0,C.Z)((0,C.Z)({},l),{},{sorting:c.join(",")}),E.next=6,ye(w);case 6:return K=E.sent,ae(K.totalCount),E.abrupt("return",{data:K.items,success:!0});case 9:case"end":return E.stop()}},i)}));return function(l,m){return o.apply(this,arguments)}}(),$e={selectedRowKeys:M,onChange:function(i){return F(i)}},ke=(0,P.useMemo)(function(){return{labelWidth:100,searchText:f.formatMessage({id:"proTable.search.searchText",defaultMessage:"\u67E5\u8BE2"}),resetText:f.formatMessage({id:"proTable.search.resetText",defaultMessage:"\u91CD\u7F6E"})}},[f]);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(ce.ZP,{children:(0,n.jsx)(oe.ZP,{actionRef:y,columns:Se,rowSelection:$e,request:function(i,l){return Ee(i,l)},rowKey:"id",pagination:{pageSize:10,total:te},dateFormatter:"string",toolBarRender:function(){return[t["AbpTenantManagement.Tenants.Create"]&&(0,n.jsxs)(U.Z,{type:"primary",shape:"round",onClick:Ce,children:[(0,n.jsx)(de.Z,{}),f.formatMessage({id:"Permission:Create",defaultMessage:"\u521B\u5EFA"})]},"create"),t["AbpTenantManagement.Tenants.BatchDelete"]&&(0,n.jsxs)(U.Z,{type:"default",shape:"round",danger:!0,onClick:xe,children:[(0,n.jsx)(fe.Z,{}),f.formatMessage({id:"Permission:BatchDelete",defaultMessage:"\u6279\u91CF\u5220\u9664"})]},"delete_keys")]},search:ke})}),(0,n.jsx)(be,{operator:q,visible:e,current:W,onCancel:Ze,onSubmit:Oe})]})},Ie=we},63876:function(ue,N,s){"use strict";s.d(N,{sQ:function(){return H},VH:function(){return re},cI:function(){return $}});var Q=s(3182),U=s(94043),C=s.n(U),z=s(21010),H=function(){var u=(0,Q.Z)(C().mark(function j(){return C().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,(0,z.WY)("".concat(Identity_API,"api/v1/AppEnums/YesOrNo"));case 2:return d.abrupt("return",d.sent);case 3:case"end":return d.stop()}},j)}));return function(){return u.apply(this,arguments)}}(),re=function(){var u=(0,Q.Z)(C().mark(function j(){return C().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,(0,z.WY)("".concat(Identity_API,"api/v1/AppEnums/Provider"));case 2:return d.abrupt("return",d.sent);case 3:case"end":return d.stop()}},j)}));return function(){return u.apply(this,arguments)}}(),$;(function(u){u[u.Add=1]="Add",u[u.Edit=2]="Edit",u[u.Detail=3]="Detail"})($||($={}))}}]);
