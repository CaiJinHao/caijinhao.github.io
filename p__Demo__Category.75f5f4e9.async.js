(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[997],{91286:function(ue,N,n){"use strict";n.r(N),n.d(N,{default:function(){return Ze}});var Q=n(57663),U=n(71577),j=n(11849),z=n(77576),H=n(12028),te=n(34792),E=n(48086),u=n(3182),T=n(71194),V=n(50146),d=n(2824),oe=n(94043),r=n.n(oe),D=n(67294),le=n(80853),ce=n(70667),X=n(57119),de=n(49101),fe=n(73171),C=n(63876),b=n(21010),me=function(){var v=(0,u.Z)(r().mark(function t(a){return r().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.extraProperties||(a.extraProperties={}),e.next=3,(0,b.WY)("".concat(Demo_API,"api/v1/Category"),{method:"Post",data:a});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},t)}));return function(a){return v.apply(this,arguments)}}(),pe=function(){var v=(0,u.Z)(r().mark(function t(a){return r().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,b.WY)("".concat(Demo_API,"api/v1/Category/").concat(a),{method:"Delete"});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t)}));return function(a){return v.apply(this,arguments)}}(),ve=function(){var v=(0,u.Z)(r().mark(function t(a){return r().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,b.WY)("".concat(Demo_API,"api/v1/Category/keys"),{method:"Delete",data:a});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t)}));return function(a){return v.apply(this,arguments)}}(),he=function(){var v=(0,u.Z)(r().mark(function t(a,h){return r().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,(0,b.WY)("".concat(Demo_API,"api/v1/Category/").concat(a),{method:"Put",data:h});case 2:return g.abrupt("return",g.sent);case 3:case"end":return g.stop()}},t)}));return function(a,h){return v.apply(this,arguments)}}(),Re=null,ge=function(){var v=(0,u.Z)(r().mark(function t(a){return r().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,b.WY)("".concat(Demo_API,"api/v1/Category/").concat(a,"/Recover"),{method:"Put"});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t)}));return function(a){return v.apply(this,arguments)}}(),ye=function(){var v=(0,u.Z)(r().mark(function t(a){return r().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,b.WY)("".concat(Demo_API,"api/v1/Category"),{method:"Get",params:a});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t)}));return function(a){return v.apply(this,arguments)}}(),Be=null,De=function(){var v=(0,u.Z)(r().mark(function t(a){return r().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,b.WY)("".concat(Demo_API,"api/v1/Category/").concat(a),{method:"Get"});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t)}));return function(a){return v.apply(this,arguments)}}(),Ce=n(952),Me=n(37476),re=n(5966),s=n(85893),Pe=function(t){var a=t.operator,h=t.visible,e=t.current,g=t.onCancel,L=t.onSubmit,J=t.children,_=(0,D.useState)(),k=(0,d.Z)(_,2),$=k[0],f=k[1],Z=(0,b.YB)(),q=(0,D.useState)(),R=(0,d.Z)(q,2),ae=R[0],ne=R[1],ee=function(){var y=(0,u.Z)(r().mark(function Y(F){var G,W,S,I;return r().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:if(!e){M.next=8;break}return G=Object.assign(e,F),M.next=4,he(e.id,G);case 4:W=M.sent,W&&L(W),M.next=13;break;case 8:return S=F,M.next=11,me(S);case 11:I=M.sent,I&&L(I);case 13:case"end":return M.stop()}},Y)}));return function(F){return y.apply(this,arguments)}}(),B=(0,D.useMemo)(function(){var y=Z.formatMessage({id:"DisplayName:Category",defaultMessage:""});switch(a){case C.cI.Add:y="".concat(y," ").concat(Z.formatMessage({id:"Permission:Create",defaultMessage:"\u521B\u5EFA"}));break;case C.cI.Edit:y="".concat(y," ").concat(Z.formatMessage({id:"Permission:Edit",defaultMessage:"\u7F16\u8F91"}));break;case C.cI.Detail:y="".concat(y," ").concat(Z.formatMessage({id:"Permission:Detail",defaultMessage:"\u8BE6\u60C5"}));break;default:break}return y},[Z,a]);return(0,D.useEffect)(function(){f(B)},[e,B]),!e&&a!=C.cI.Add?(0,s.jsx)(s.Fragment,{}):(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(Me.Y,{width:378,visible:h,title:$,onFinish:ee,initialValues:a==C.cI.Add?{}:e,trigger:(0,s.jsx)(s.Fragment,{children:J}),modalProps:{onCancel:function(){return g()},destroyOnClose:!0},submitter:a==C.cI.Detail?!1:{},children:(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)(Ce.ZP.Group,{children:[(0,s.jsx)(re.Z,{width:"md",name:"name",label:Z.formatMessage({id:"DisplayName:Category:Name",defaultMessage:""})}),(0,s.jsx)(re.Z,{width:"md",name:"description",label:Z.formatMessage({id:"DisplayName:Category:Description",defaultMessage:""})})]})})})})},we=Pe,be=function(){var t=(0,b.md)(),a=(0,D.useState)(!1),h=(0,d.Z)(a,2),e=h[0],g=h[1],L=(0,D.useState)(C.cI.Detail),J=(0,d.Z)(L,2),_=J[0],k=J[1],$=V.Z.confirm,f=(0,b.YB)(),Z=(0,D.useRef)(),q=(0,D.useState)(0),R=(0,d.Z)(q,2),ae=R[0],ne=R[1],ee=(0,D.useState)([]),B=(0,d.Z)(ee,2),y=B[0],Y=B[1],F=(0,D.useState)(void 0),G=(0,d.Z)(F,2),W=G[0],S=G[1],I=function(){var i;(i=Z.current)===null||i===void 0||i.reload(),Y([])},se=function(){var c=(0,u.Z)(r().mark(function i(){var o;return r().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,(0,C.sQ)();case 2:return o=l.sent,l.abrupt("return",o);case 4:case"end":return l.stop()}},i)}));return function(){return c.apply(this,arguments)}}(),M=function(){var c=(0,u.Z)(r().mark(function i(o,m){return r().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:o.isDeleted?$({icon:(0,s.jsx)(X.Z,{}),content:(0,s.jsx)(s.Fragment,{children:f.formatMessage({id:"ProTable.delete.Recover",defaultMessage:"\u786E\u5B9A\u8981\u6062\u590D\u5417?"})}),onOk:function(){var p=(0,u.Z)(r().mark(function w(){return r().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.next=2,ge(o.id);case 2:I();case 3:case"end":return O.stop()}},w)}));function x(){return p.apply(this,arguments)}return x}(),onCancel:function(){}}):$({icon:(0,s.jsx)(X.Z,{}),content:(0,s.jsx)(s.Fragment,{children:f.formatMessage({id:"ProTable.delete.Delete",defaultMessage:"\u786E\u5B9A\u8981\u5220\u9664\u5417?"})}),onOk:function(){var p=(0,u.Z)(r().mark(function w(){return r().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.next=2,pe(o.id);case 2:I();case 3:case"end":return O.stop()}},w)}));function x(){return p.apply(this,arguments)}return x}(),onCancel:function(){}});case 1:case"end":return P.stop()}},i)}));return function(o,m){return c.apply(this,arguments)}}(),Oe=function(){g(!1)},Ie=function(){g(!1),I()},je=function(){k(C.cI.Add),g(!0),S(void 0)},xe=function(){var c=(0,u.Z)(r().mark(function i(){return r().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:y.length>0?$({icon:(0,s.jsx)(X.Z,{}),content:(0,s.jsx)(s.Fragment,{children:f.formatMessage({id:"ProTable.delete.BatchDelete",defaultMessage:"\u786E\u5B9A\u8981\u5220\u9664\u9009\u4E2D\u9879\u5417?"})}),onOk:function(){var l=(0,u.Z)(r().mark(function p(){return r().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return w.next=2,ve(y);case 2:I();case 3:case"end":return w.stop()}},p)}));function P(){return l.apply(this,arguments)}return P}(),onCancel:function(){}}):E.default.warning(f.formatMessage({id:"message.select.required",defaultMessage:"\u8BF7\u9009\u62E9\u64CD\u4F5C\u9879"}));case 1:case"end":return m.stop()}},i)}));return function(){return c.apply(this,arguments)}}(),ie=function(){var c=(0,u.Z)(r().mark(function i(o,m){var l;return r().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return k(o),g(!0),p.next=4,De(m.id);case 4:l=p.sent,S(l);case 6:case"end":return p.stop()}},i)}));return function(o,m){return c.apply(this,arguments)}}(),Te=function(){var c=(0,u.Z)(r().mark(function i(o){return r().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,ie(C.cI.Edit,o);case 2:case"end":return l.stop()}},i)}));return function(o){return c.apply(this,arguments)}}(),Se=function(){var c=(0,u.Z)(r().mark(function i(o){return r().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,ie(C.cI.Detail,o);case 2:case"end":return l.stop()}},i)}));return function(o){return c.apply(this,arguments)}}();(0,D.useEffect)(function(){S(void 0)},[e]);var Ae=[{title:f.formatMessage({id:"DisplayName:Category:Name",defaultMessage:""}),dataIndex:"name"},{title:f.formatMessage({id:"DisplayName:Category:Description",defaultMessage:""}),dataIndex:"description"},{title:f.formatMessage({id:"JhAbp:IsDeleted",defaultMessage:"\u662F\u5426\u5220\u9664"}),dataIndex:"isDeleted",search:!1,render:function(i,o,m,l){return(0,s.jsx)(H.Z,{disabled:!(t["MyDemo.Categorys.Recover"]&&t["MyDemo.Categorys.Delete"]),checked:o.isDeleted,onChange:function(){return M(o,l)}})}},{title:f.formatMessage({id:"JhAbp:CreationTime",defaultMessage:"\u521B\u5EFA\u65F6\u95F4"}),dataIndex:"creationTime",valueType:"dateTime",search:!1,sorter:!0},{title:f.formatMessage({id:"JhAbp:Operation",defaultMessage:"\u64CD\u4F5C"}),key:"option",valueType:"option",render:function(i,o){return!o.isDeleted&&[t["MyDemo.Categorys.Update"]&&(0,s.jsx)("a",{onClick:function(){return Te(o)},children:f.formatMessage({id:"Permission:Edit",defaultMessage:"\u7F16\u8F91"})},"edit"),(0,s.jsx)("a",{onClick:function(){return Se(o)},children:f.formatMessage({id:"Permission:Detail",defaultMessage:"\u8BE6\u60C5"})},"detail")]}},{title:f.formatMessage({id:"JhAbp:IsDeleted",defaultMessage:"\u662F\u5426\u5220\u9664"}),dataIndex:"deleted",hideInTable:!0,valueType:"select",initialValue:2,request:se}],Ee=function(){var c=(0,u.Z)(r().mark(function i(o,m){var l,P,p,x,w,K;return r().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:l=[],P=new Object(m);for(p in P)P.hasOwnProperty(p)&&(x=m[p],l.push("".concat(p," ").concat(x.replace("end",""))));return w=(0,j.Z)((0,j.Z)({},o),{},{sorting:l.join(",")}),A.next=6,ye(w);case 6:return K=A.sent,ne(K.totalCount),A.abrupt("return",{data:K.items,success:!0});case 9:case"end":return A.stop()}},i)}));return function(o,m){return c.apply(this,arguments)}}(),ke={selectedRowKeys:y,onChange:function(i){return Y(i)}},$e=(0,D.useMemo)(function(){return{labelWidth:100,searchText:f.formatMessage({id:"proTable.search.searchText",defaultMessage:"\u67E5\u8BE2"}),resetText:f.formatMessage({id:"proTable.search.resetText",defaultMessage:"\u91CD\u7F6E"})}},[f]);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(le.ZP,{children:(0,s.jsx)(ce.ZP,{actionRef:Z,columns:Ae,rowSelection:ke,request:function(i,o){return Ee(i,o)},rowKey:"id",pagination:{pageSize:10,total:ae},dateFormatter:"string",toolBarRender:function(){return[t["MyDemo.Categorys.Create"]&&(0,s.jsxs)(U.Z,{type:"primary",shape:"round",onClick:je,children:[(0,s.jsx)(de.Z,{}),f.formatMessage({id:"Permission:Create",defaultMessage:"\u521B\u5EFA"})]},"create"),t["MyDemo.Categorys.BatchDelete"]&&(0,s.jsxs)(U.Z,{type:"default",shape:"round",danger:!0,onClick:xe,children:[(0,s.jsx)(fe.Z,{}),f.formatMessage({id:"Permission:BatchDelete",defaultMessage:"\u6279\u91CF\u5220\u9664"})]},"delete_keys")]},search:$e})}),(0,s.jsx)(we,{operator:_,visible:e,current:W,onCancel:Oe,onSubmit:Ie})]})},Ze=be},63876:function(ue,N,n){"use strict";n.d(N,{sQ:function(){return H},VH:function(){return te},cI:function(){return E}});var Q=n(3182),U=n(94043),j=n.n(U),z=n(21010),H=function(){var u=(0,Q.Z)(j().mark(function T(){return j().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,(0,z.WY)("".concat(Identity_API,"api/v1/AppEnums/YesOrNo"));case 2:return d.abrupt("return",d.sent);case 3:case"end":return d.stop()}},T)}));return function(){return u.apply(this,arguments)}}(),te=function(){var u=(0,Q.Z)(j().mark(function T(){return j().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,(0,z.WY)("".concat(Identity_API,"api/v1/AppEnums/Provider"));case 2:return d.abrupt("return",d.sent);case 3:case"end":return d.stop()}},T)}));return function(){return u.apply(this,arguments)}}(),E;(function(u){u[u.Add=1]="Add",u[u.Edit=2]="Edit",u[u.Detail=3]="Detail"})(E||(E={}))}}]);
