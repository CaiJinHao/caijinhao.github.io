(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[685],{24259:function(se,O,r){"use strict";r.r(O),r.d(O,{default:function(){return t}});var x=r(57663),$=r(71577),i=r(11849),d=r(3182),g=r(2824),U=r(94043),f=r.n(U),s=r(67294),w=r(80853),B=r(70667),c=r(49101),_=r(63876),k=r(21010),C=r(52146),q=r(952),ue=r(37476),ee=r(5966),e=r(85893),n=function(b){var E=b.operator,K=b.visible,v=b.current,S=b.onCancel,Y=b.onSubmit,F=b.children,te=(0,s.useState)(),j=(0,g.Z)(te,2),P=j[0],L=j[1],D=(0,k.YB)(),N=(0,s.useState)(),J=(0,g.Z)(N,2),ne=J[0],re=J[1],X=function(){var h=(0,d.Z)(f().mark(function H(A){var Q,T,G,W;return f().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:if(A.extraProperties=ne,!v){y.next=9;break}return Q=Object.assign(v,A),y.next=5,C.et(v.id,Q);case 5:T=y.sent,T&&Y(T),y.next=16;break;case 9:return G=A,G.isDefault=!0,G.isPublic=!0,y.next=14,C.Tp(G);case 14:W=y.sent,W&&Y(W);case 16:case"end":return y.stop()}},H)}));return function(A){return h.apply(this,arguments)}}(),z=(0,s.useMemo)(function(){var h=D.formatMessage({id:"DisplayName:IdentityRole",defaultMessage:"\u89D2\u8272"});switch(E){case _.cI.Add:h="".concat(h," ").concat(D.formatMessage({id:"Permission:Create",defaultMessage:"\u521B\u5EFA"}));break;case _.cI.Edit:h="".concat(h," ").concat(D.formatMessage({id:"Permission:Edit",defaultMessage:"\u7F16\u8F91"}));break;case _.cI.Detail:h="".concat(h," ").concat(D.formatMessage({id:"Permission:Detail",defaultMessage:"\u8BE6\u60C5"}));break;default:break}return h},[D,E]);return(0,s.useEffect)(function(){L(z),re(v==null?void 0:v.extraProperties)},[v,z]),!v&&E!=_.cI.Add?(0,e.jsx)(e.Fragment,{}):(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(ue.Y,{width:378,visible:K,title:P,onFinish:X,initialValues:E==_.cI.Add?{}:v,trigger:(0,e.jsx)(e.Fragment,{children:F}),modalProps:{onCancel:function(){return S()},destroyOnClose:!0},submitter:E==_.cI.Detail?!1:{},children:(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(q.ZP.Group,{children:(0,e.jsx)(ee.Z,{width:"md",name:"name",label:D.formatMessage({id:"DisplayName:IdentityRole:DisplayName",defaultMessage:"\u89D2\u8272\u540D\u79F0"}),rules:[{required:!0,message:"".concat(D.formatMessage({id:"form.rules.message",defaultMessage:"\u8BF7\u8F93\u5165"}),"${label}")}]})})})})})},a=n,u=function(){var b=(0,k.md)(),E=(0,s.useState)(!1),K=(0,g.Z)(E,2),v=K[0],S=K[1],Y=(0,s.useState)(_.cI.Detail),F=(0,g.Z)(Y,2),te=F[0],j=F[1],P=(0,k.YB)(),L=(0,s.useRef)(),D=(0,s.useState)(0),N=(0,g.Z)(D,2),J=N[0],ne=N[1],re=(0,s.useState)([]),X=(0,g.Z)(re,2),z=X[0],h=X[1],H=(0,s.useState)(void 0),A=(0,g.Z)(H,2),Q=A[0],T=A[1],G=function(){S(!1)},W=function(){var o;S(!1),(o=L.current)===null||o===void 0||o.reload()},ie=function(){j(_.cI.Add),S(!0),T(void 0)},y=function(){var p=(0,d.Z)(f().mark(function o(l){var R;return f().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return S(!0),M.next=3,C.dX(l.id);case 3:R=M.sent,T(R);case 5:case"end":return M.stop()}},o)}));return function(l){return p.apply(this,arguments)}}(),le=function(){var p=(0,d.Z)(f().mark(function o(l){return f().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return j(_.cI.Edit),m.next=3,y(l);case 3:case"end":return m.stop()}},o)}));return function(l){return p.apply(this,arguments)}}(),de=function(){var p=(0,d.Z)(f().mark(function o(l){return f().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return j(_.cI.Detail),m.next=3,y(l);case 3:case"end":return m.stop()}},o)}));return function(l){return p.apply(this,arguments)}}();(0,s.useEffect)(function(){T(void 0)},[v]);var fe=[{title:P.formatMessage({id:"DisplayName:IdentityRole:DisplayName",defaultMessage:"\u89D2\u8272\u540D\u79F0"}),dataIndex:"name"},{title:P.formatMessage({id:"JhAbp:Operation",defaultMessage:"\u64CD\u4F5C"}),width:180,key:"option",valueType:"option",render:function(o,l){return[b["AbpIdentity.Roles.Update"]&&(0,e.jsx)("a",{onClick:function(){return le(l)},children:P.formatMessage({id:"Permission:Edit",defaultMessage:"\u7F16\u8F91"})},"edit"),(0,e.jsx)("a",{onClick:function(){return de(l)},children:P.formatMessage({id:"Permission:Detail",defaultMessage:"\u8BE6\u60C5"})},"detail")]}}],pe=function(){var p=(0,d.Z)(f().mark(function o(l,R){var m,M,V,oe,ce,ae;return f().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:m=[],M=new Object(R);for(V in M)M.hasOwnProperty(V)&&(oe=R[V],m.push("".concat(V," ").concat(oe.replace("end",""))));return ce=(0,i.Z)((0,i.Z)({},l),{},{sorting:m.join(",")}),Z.next=6,C.GJ(ce);case 6:return ae=Z.sent,ne(ae.totalCount),Z.abrupt("return",{data:ae.items,success:!0});case 9:case"end":return Z.stop()}},o)}));return function(l,R){return p.apply(this,arguments)}}(),me={selectedRowKeys:z,onChange:function(o){return h(o)}},_e=(0,s.useMemo)(function(){return{labelWidth:100,searchText:P.formatMessage({id:"proTable.search.searchText",defaultMessage:"\u67E5\u8BE2"}),resetText:P.formatMessage({id:"proTable.search.resetText",defaultMessage:"\u91CD\u7F6E"})}},[P]);return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(w.ZP,{children:(0,e.jsx)(B.ZP,{actionRef:L,columns:fe,rowSelection:me,request:function(o,l){return pe(o,l)},rowKey:"id",pagination:{pageSize:10,total:J},dateFormatter:"string",toolBarRender:function(){return[b["AbpIdentity.Roles.Create"]&&(0,e.jsxs)($.Z,{type:"primary",shape:"round",onClick:ie,children:[(0,e.jsx)(c.Z,{}),P.formatMessage({id:"Permission:Create",defaultMessage:"\u521B\u5EFA"})]},"create")]},search:_e})}),(0,e.jsx)(a,{operator:te,visible:v,current:Q,onCancel:G,onSubmit:W})]})},t=u},63876:function(se,O,r){"use strict";r.d(O,{sQ:function(){return g},VH:function(){return U},cI:function(){return f}});var x=r(3182),$=r(94043),i=r.n($),d=r(21010),g=function(){var s=(0,x.Z)(i().mark(function w(){return i().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,(0,d.WY)("".concat(Identity_API,"api/v1/AppEnums/YesOrNo"));case 2:return c.abrupt("return",c.sent);case 3:case"end":return c.stop()}},w)}));return function(){return s.apply(this,arguments)}}(),U=function(){var s=(0,x.Z)(i().mark(function w(){return i().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,(0,d.WY)("".concat(Identity_API,"api/v1/AppEnums/Provider"));case 2:return c.abrupt("return",c.sent);case 3:case"end":return c.stop()}},w)}));return function(){return s.apply(this,arguments)}}(),f;(function(s){s[s.Add=1]="Add",s[s.Edit=2]="Edit",s[s.Detail=3]="Detail"})(f||(f={}))},52146:function(se,O,r){"use strict";r.d(O,{Tp:function(){return g},et:function(){return B},GJ:function(){return _},dX:function(){return C},_m:function(){return q},Ur:function(){return ee}});var x=r(3182),$=r(94043),i=r.n($),d=r(21010),g=function(){var e=(0,x.Z)(i().mark(function n(a){return i().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a.extraProperties||(a.extraProperties={}),t.next=3,(0,d.WY)("".concat(Identity_API,"api/v1/IdentityRole/roles"),{method:"Post",data:a});case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}},n)}));return function(a){return e.apply(this,arguments)}}(),U=null,f=null,s=null,w=null,B=function(){var e=(0,x.Z)(i().mark(function n(a,u){return i().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return I.next=2,(0,d.WY)("".concat(Identity_API,"api/identity/roles/").concat(a),{method:"Put",data:u});case 2:return I.abrupt("return",I.sent);case 3:case"end":return I.stop()}},n)}));return function(a,u){return e.apply(this,arguments)}}(),c=null,_=function(){var e=(0,x.Z)(i().mark(function n(a){return i().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,d.WY)("".concat(Identity_API,"api/v1/IdentityRole"),{method:"Get",params:a});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},n)}));return function(a){return e.apply(this,arguments)}}(),k=null,C=function(){var e=(0,x.Z)(i().mark(function n(a){return i().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,d.WY)("".concat(Identity_API,"api/v1/IdentityRole/").concat(a),{method:"Get"});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},n)}));return function(a){return e.apply(this,arguments)}}(),q=function(){var e=(0,x.Z)(i().mark(function n(a){return i().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,d.WY)("".concat(Identity_API,"api/v1/IdentityRole/options"),{method:"Get",params:{name:a}});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},n)}));return function(a){return e.apply(this,arguments)}}(),ue=null,ee=function(){var e=(0,x.Z)(i().mark(function n(){return i().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,(0,d.WY)("".concat(Identity_API,"api/v1/IdentityRole/Trees"),{method:"Get"});case 2:return u.abrupt("return",u.sent);case 3:case"end":return u.stop()}},n)}));return function(){return e.apply(this,arguments)}}()}}]);
