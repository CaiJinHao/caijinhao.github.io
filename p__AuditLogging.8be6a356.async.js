(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[894],{24924:function(V,j,n){"use strict";n.r(j),n.d(j,{default:function(){return pe}});var S=n(57663),O=n(71577),A=n(11849),R=n(34792),B=n(48086),y=n(3182),w=n(71194),c=n(50146),m=n(2824),F=n(94043),r=n.n(F),u=n(67294),X=n(80853),q=n(70667),ee=n(57119),te=n(73171),D=n(63876),P=n(21010),we=null,ae=function(){var v=(0,y.Z)(r().mark(function s(i){return r().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,P.WY)("".concat(Identity_API,"api/v1/AuditLogging/keys"),{method:"Delete",data:i});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},s)}));return function(i){return v.apply(this,arguments)}}(),ne=function(){var v=(0,y.Z)(r().mark(function s(i){return r().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,P.WY)("".concat(Identity_API,"api/v1/AuditLogging/").concat(i),{method:"Get"});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},s)}));return function(i){return v.apply(this,arguments)}}(),re=function(){var v=(0,y.Z)(r().mark(function s(i){return r().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,P.WY)("".concat(Identity_API,"api/v1/AuditLogging"),{method:"Get",params:i});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},s)}));return function(i){return v.apply(this,arguments)}}(),Ze=null,Ce=null,se=n(952),ie=n(37476),M=n(5966),oe=n(22122),le=n(81253),ue=n(76319),de=["fieldProps","proFieldProps"],ce=function(s,i){var f=s.fieldProps,t=s.proFieldProps,b=(0,le.Z)(s,de);return u.createElement(ue.Z,(0,oe.Z)({ref:i,mode:"edit",valueType:"textarea",fieldProps:f,proFieldProps:t},b))},L=u.forwardRef(ce),a=n(85893),me=function(s){var i=s.operator,f=s.visible,t=s.current,b=s.onCancel,Z=s.children,G=(0,u.useState)(),C=(0,m.Z)(G,2),$=C[0],K=C[1],e=(0,P.YB)(),E=(0,u.useMemo)(function(){var x=e.formatMessage({id:"DisplayName:AuditLog",defaultMessage:""});switch(i){case D.cI.Add:x="".concat(x," ").concat(e.formatMessage({id:"Permission:Create",defaultMessage:"\u521B\u5EFA"}));break;case D.cI.Edit:x="".concat(x," ").concat(e.formatMessage({id:"Permission:Edit",defaultMessage:"\u7F16\u8F91"}));break;case D.cI.Detail:x="".concat(x," ").concat(e.formatMessage({id:"Permission:Detail",defaultMessage:"\u8BE6\u60C5"}));break;default:break}return x},[i]);return(0,u.useEffect)(function(){K(E)},[t,i]),!t&&i!=D.cI.Add?(0,a.jsx)(a.Fragment,{}):(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(ie.Y,{visible:f,title:$,initialValues:i==D.cI.Add?{}:t,trigger:(0,a.jsx)(a.Fragment,{children:Z}),modalProps:{onCancel:function(){return b()},destroyOnClose:!0},submitter:i==D.cI.Detail?!1:{},children:(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)(se.ZP.Group,{children:[(0,a.jsx)(M.Z,{width:"md",name:"applicationName",label:e.formatMessage({id:"DisplayName:AuditLog:ApplicationName",defaultMessage:"\u5E94\u7528\u540D\u79F0"})}),(0,a.jsx)(M.Z,{width:"md",name:"userName",label:e.formatMessage({id:"DisplayName:AuditLog:UserName",defaultMessage:"\u7528\u6237\u8D26\u53F7"})}),(0,a.jsx)(M.Z,{width:"md",name:"tenantName",label:e.formatMessage({id:"DisplayName:AuditLog:TenantName",defaultMessage:"\u79DF\u6237\u540D\u79F0"})}),(0,a.jsx)(M.Z,{width:"md",name:"executionTime",label:e.formatMessage({id:"DisplayName:AuditLog:ExecutionTime",defaultMessage:"\u6267\u884C\u65F6\u95F4"})}),(0,a.jsx)(M.Z,{width:"md",name:"executionDuration",label:e.formatMessage({id:"DisplayName:AuditLog:ExecutionDuration",defaultMessage:"\u6267\u884C\u8017\u65F6"})}),(0,a.jsx)(M.Z,{width:"md",name:"clientIpAddress",label:e.formatMessage({id:"DisplayName:AuditLog:ClientIpAddress",defaultMessage:"\u5BA2\u6237\u7AEFIP"})}),(0,a.jsx)(M.Z,{width:"md",name:"clientName",label:e.formatMessage({id:"DisplayName:AuditLog:ClientName",defaultMessage:"\u5BA2\u6237\u7AEF\u540D\u79F0"})}),(0,a.jsx)(M.Z,{width:"md",name:"clientId",label:e.formatMessage({id:"DisplayName:AuditLog:ClientId",defaultMessage:"\u5BA2\u6237\u7AEFId"})}),(0,a.jsx)(M.Z,{width:"md",name:"httpMethod",label:e.formatMessage({id:"DisplayName:AuditLog:HttpMethod",defaultMessage:"Http\u65B9\u6CD5"})}),(0,a.jsx)(M.Z,{width:"md",name:"httpStatusCode",label:e.formatMessage({id:"DisplayName:AuditLog:HttpStatusCode",defaultMessage:"Http\u72B6\u6001\u7801"})}),(0,a.jsx)(L,{width:"md",name:"browserInfo",label:e.formatMessage({id:"DisplayName:AuditLog:BrowserInfo",defaultMessage:"\u6D4F\u89C8\u5668\u4FE1\u606F"}),fieldProps:{rows:4}}),(0,a.jsx)(L,{width:"md",name:"url",label:e.formatMessage({id:"DisplayName:AuditLog:Url",defaultMessage:"Url"}),fieldProps:{rows:4}}),(0,a.jsx)(L,{width:"md",label:e.formatMessage({id:"DisplayName:AuditLog:Actions",defaultMessage:"\u6267\u884C\u8FC7\u7A0B"}),fieldProps:{value:JSON.stringify(t==null?void 0:t.actions),rows:4}}),(0,a.jsx)(L,{width:"md",label:e.formatMessage({id:"DisplayName:AuditLog:EntityChanges",defaultMessage:"\u66F4\u6539\u5B9E\u4F53"}),fieldProps:{value:JSON.stringify(t==null?void 0:t.entityChanges),rows:4}}),(0,a.jsx)(L,{width:"md",name:"comments",label:e.formatMessage({id:"DisplayName:AuditLog:Comments",defaultMessage:"\u6CE8\u91CA"})}),(0,a.jsx)(L,{width:"md",name:"exceptions",label:e.formatMessage({id:"DisplayName:AuditLog:Exceptions",defaultMessage:"\u5F02\u5E38"})})]})})})})},fe=me,ge=function(){var s=(0,u.useState)(!1),i=(0,m.Z)(s,2),f=i[0],t=i[1],b=(0,u.useState)(D.cI.Detail),Z=(0,m.Z)(b,2),G=Z[0],C=Z[1],$=c.Z.confirm,K=(0,P.md)(),e=(0,P.YB)(),E=(0,u.useRef)(),x=(0,u.useState)(0),U=(0,m.Z)(x,2),ve=U[0],he=U[1],ye=(0,u.useState)([]),_=(0,m.Z)(ye,2),W=_[0],J=_[1],Me=(0,u.useState)(void 0),k=(0,m.Z)(Me,2),xe=k[0],z=k[1],Q=function(){var o;(o=E.current)===null||o===void 0||o.reload(),J([])},De=function(){t(!1)},Ae=function(){t(!1),Q()},Ie=function(){var l=(0,y.Z)(r().mark(function o(){return r().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:W.length>0?$({icon:(0,a.jsx)(ee.Z,{}),content:(0,a.jsx)(a.Fragment,{children:e.formatMessage({id:"proTable.delete.BatchDelete",defaultMessage:"\u786E\u5B9A\u8981\u5220\u9664\u9009\u4E2D\u9879\u5417?"})}),onOk:function(){var p=(0,y.Z)(r().mark(function N(){return r().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return I.next=2,ae(W);case 2:Q();case 3:case"end":return I.stop()}},N)}));function h(){return p.apply(this,arguments)}return h}(),onCancel:function(){}}):B.default.warning(e.formatMessage({id:"message.select.required",defaultMessage:"\u8BF7\u9009\u62E9\u64CD\u4F5C\u9879"}));case 1:case"end":return g.stop()}},o)}));return function(){return l.apply(this,arguments)}}(),Pe=function(){var l=(0,y.Z)(r().mark(function o(d){var g;return r().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return t(!0),h.next=3,ne(d.id);case 3:g=h.sent,z(g);case 5:case"end":return h.stop()}},o)}));return function(d){return l.apply(this,arguments)}}(),Le=function(){var l=(0,y.Z)(r().mark(function o(d){return r().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return C(D.cI.Detail),p.next=3,Pe(d);case 3:case"end":return p.stop()}},o)}));return function(d){return l.apply(this,arguments)}}();(0,u.useEffect)(function(){z(void 0)},[f]);var Ne=[{title:e.formatMessage({id:"DisplayName:AuditLog:ApplicationName",defaultMessage:"\u5E94\u7528\u540D\u79F0"}),dataIndex:"applicationName"},{title:e.formatMessage({id:"DisplayName:AuditLog:UserName",defaultMessage:"\u64CD\u4F5C\u7528\u6237\u540D"}),dataIndex:"userName"},{title:e.formatMessage({id:"DisplayName:AuditLog:TenantName",defaultMessage:"\u79DF\u6237\u540D\u79F0"}),dataIndex:"tenantName"},{title:e.formatMessage({id:"DisplayName:AuditLog:ExecutionTime",defaultMessage:"\u6267\u884C\u65F6\u95F4"}),dataIndex:"executionTime",search:!1},{title:e.formatMessage({id:"DisplayName:AuditLog:ExecutionDuration",defaultMessage:"\u6267\u884C\u8017\u65F6"}),dataIndex:"executionDuration",search:!1},{title:e.formatMessage({id:"DisplayName:AuditLog:ClientIpAddress",defaultMessage:"Ip\u5730\u5740"}),dataIndex:"clientIpAddress"},{title:e.formatMessage({id:"DisplayName:AuditLog:HttpMethod",defaultMessage:"Http\u65B9\u6CD5"}),dataIndex:"httpMethod"},{title:e.formatMessage({id:"DisplayName:AuditLog:Url",defaultMessage:"Url"}),dataIndex:"url",search:!1},{title:e.formatMessage({id:"DisplayName:AuditLog:HttpStatusCode",defaultMessage:"Http\u72B6\u6001\u7801"}),dataIndex:"httpStatusCode"},{title:e.formatMessage({id:"JhAbp:Operation",defaultMessage:"\u64CD\u4F5C"}),key:"option",valueType:"option",render:function(o,d){return[(0,a.jsx)("a",{onClick:function(){return Le(d)},children:e.formatMessage({id:"Permission:Detail",defaultMessage:"\u8BE6\u60C5"})},"detail")]}},{title:e.formatMessage({id:"DisplayName:AuditLog:HasException",defaultMessage:"\u6570\u636E\u5F02\u5E38\u8FC7\u6EE4"}),dataIndex:"hasException",valueType:"radio",hideInTable:!0,initialValue:"",valueEnum:{"":{text:"\u5168\u90E8"},true:{text:"\u5F02\u5E38"}}},{title:e.formatMessage({id:"DisplayName:AuditLog:DateTimeRange",defaultMessage:"\u6267\u884C\u65F6\u95F4\u533A\u95F4"}),key:"dateTimeRange",valueType:"dateTimeRange",hideInTable:!0,colSize:2,search:{transform:function(o){return{startTime:o[0],endTime:o[1]}}}}],Te=function(){var l=(0,y.Z)(r().mark(function o(d,g){var p,h,N,Y,I,H;return r().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:p=[],h=new Object(g);for(N in h)h.hasOwnProperty(N)&&(Y=g[N],p.push("".concat(N," ").concat(Y.replace("end",""))));return I=(0,A.Z)((0,A.Z)({},d),{},{sorting:p.join(",")}),T.next=6,re(I);case 6:return H=T.sent,he(H.totalCount),T.abrupt("return",{data:H.items,success:!0});case 9:case"end":return T.stop()}},o)}));return function(d,g){return l.apply(this,arguments)}}(),be={selectedRowKeys:W,onChange:function(o){return J(o)}},je=(0,u.useMemo)(function(){return{labelWidth:100,searchText:e.formatMessage({id:"proTable.search.searchText",defaultMessage:"\u67E5\u8BE2"}),resetText:e.formatMessage({id:"proTable.search.resetText",defaultMessage:"\u91CD\u7F6E"})}},[e]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(X.ZP,{children:(0,a.jsx)(q.ZP,{actionRef:E,columns:Ne,rowSelection:be,request:function(o,d){return Te(o,d)},rowKey:"id",pagination:{pageSize:10,total:ve},dateFormatter:"string",toolBarRender:function(){return[K["JhAuditLogging.AuditLoggings.BatchDelete"]&&(0,a.jsxs)(O.Z,{type:"default",shape:"round",danger:!0,onClick:Ie,children:[(0,a.jsx)(te.Z,{}),e.formatMessage({id:"Permission:BatchDelete",defaultMessage:"\u6279\u91CF\u5220\u9664"})]},"delete_keys")]},search:je})}),(0,a.jsx)(fe,{operator:G,visible:f,current:xe,onCancel:De,onSubmit:Ae})]})},pe=ge},63876:function(V,j,n){"use strict";n.d(j,{sQ:function(){return B},VH:function(){return y},cI:function(){return w}});var S=n(3182),O=n(94043),A=n.n(O),R=n(21010),B=function(){var c=(0,S.Z)(A().mark(function m(){return A().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,R.WY)("".concat(Identity_API,"api/v1/AppEnums/YesOrNo"));case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}},m)}));return function(){return c.apply(this,arguments)}}(),y=function(){var c=(0,S.Z)(A().mark(function m(){return A().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,R.WY)("".concat(Identity_API,"api/v1/AppEnums/Provider"));case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}},m)}));return function(){return c.apply(this,arguments)}}(),w;(function(c){c[c.Add=1]="Add",c[c.Edit=2]="Edit",c[c.Detail=3]="Detail"})(w||(w={}))}}]);
