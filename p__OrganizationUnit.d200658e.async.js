(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[457],{70924:function(Oe,V,t){"use strict";t.r(V),t.d(V,{default:function(){return ke}});var k=t(13062),q=t(71230),O=t(57663),U=t(71577),de=t(89032),ee=t(15746),_=t(11849),we=t(77576),fe=t(12028),pe=t(34792),me=t(48086),y=t(3182),Ce=t(71194),te=t(50146),P=t(2824),ve=t(94043),u=t.n(ve),n=t(67294),a=t(80853),o=t(70667),c=t(57119),r=t(49101),j=t(73171),b=t(63876),ne=t(21010),$=t(10030),Me=t(952),Ze=t(37476),Pe=t(5966),re=t(93224),ae=t(64317),Se=t(52146),e=t(85893),De=function(f){var w=f.onChange,x=f.name,g=(0,re.Z)(f,["onChange","name"]),S=(0,n.useCallback)((0,y.Z)(u().mark(function T(){var C,D;return u().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,Se._m("");case 2:return C=d.sent,D=C.items,d.abrupt("return",D);case 5:case"end":return d.stop()}},T)})),[]);return(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(ae.Z,(0,_.Z)((0,_.Z)({},g),{},{mode:"multiple",allowClear:!0,name:x!=null?x:"roleIds",request:S,fieldProps:{onChange:w}}))})},be=De,Re=t(67810),je=function(f){var w=f.onChange,x=f.name,g=(0,re.Z)(f,["onChange","name"]),S=(0,n.useCallback)((0,y.Z)(u().mark(function T(){var C,D;return u().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,Re._m();case 2:return C=d.sent,D=C.items,d.abrupt("return",D);case 5:case"end":return d.stop()}},T)})),[]);return(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(ae.Z,(0,_.Z)((0,_.Z)({},g),{},{allowClear:!0,name:x!=null?x:"userId",request:S,fieldProps:{onChange:w}}))})},Te=je,Ae=function(f){var w=f.onChange,x=f.name,g=(0,re.Z)(f,["onChange","name"]),S=(0,n.useCallback)((0,y.Z)(u().mark(function T(){var C,D;return u().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,$._m("");case 2:return C=d.sent,D=C.items,d.abrupt("return",D);case 5:case"end":return d.stop()}},T)})),[]);return(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(ae.Z,(0,_.Z)((0,_.Z)({},g),{},{allowClear:!0,name:x!=null?x:"OrganizationUnitId",request:S,fieldProps:{onChange:w}}))})},Ue=Ae,_e=function(f){var w=f.operator,x=f.visible,g=f.current,S=f.onCancel,T=f.onSubmit,C=f.children,D=(0,n.useState)(),E=(0,P.Z)(D,2),d=E[0],h=E[1],M=(0,ne.YB)(),se=(0,n.useState)(),J=(0,P.Z)(se,2),ie=J[0],ue=J[1],oe=function(){var I=(0,y.Z)(u().mark(function W(B){var Y,F,H,L;return u().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:if(B.extraProperties=ie,!g){R.next=9;break}return Y=Object.assign(g,B),R.next=5,$.BN(g.id,Y);case 5:F=R.sent,F&&T(F),R.next=14;break;case 9:return H=B,R.next=12,$.Qj(H);case 12:L=R.sent,L&&T(L);case 14:case"end":return R.stop()}},W)}));return function(B){return I.apply(this,arguments)}}(),K=(0,n.useMemo)(function(){var I=M.formatMessage({id:"DisplayName:JhOrganizationUnit",defaultMessage:"\u7EC4\u7EC7"});switch(w){case b.cI.Add:I="".concat(I," ").concat(M.formatMessage({id:"Permission:Create",defaultMessage:"\u521B\u5EFA"}));break;case b.cI.Edit:I="".concat(I," ").concat(M.formatMessage({id:"Permission:Edit",defaultMessage:"\u7F16\u8F91"}));break;case b.cI.Detail:I="".concat(I," ").concat(M.formatMessage({id:"Permission:Detail",defaultMessage:"\u8BE6\u60C5"}));break;default:break}return I},[M,w]);return(0,n.useEffect)(function(){h(K),ue(g==null?void 0:g.extraProperties)},[g,K]),!g&&w!=b.cI.Add?(0,e.jsx)(e.Fragment,{}):(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(Ze.Y,{visible:x,title:d,onFinish:oe,initialValues:w==b.cI.Add?{}:g,trigger:(0,e.jsx)(e.Fragment,{children:C}),modalProps:{onCancel:function(){return S()},destroyOnClose:!0},submitter:w==b.cI.Detail?!1:{},children:(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)(Me.ZP.Group,{children:[(0,e.jsx)(Ue,{width:"md",name:"parentId",label:M.formatMessage({id:"DisplayName:JhOrganizationUnit:ParentId",defaultMessage:"\u4E0A\u7EA7\u7EC4\u7EC7"})}),(0,e.jsx)(Pe.Z,{width:"md",name:"displayName",label:M.formatMessage({id:"DisplayName:JhOrganizationUnit:DisplayName",defaultMessage:"\u7EC4\u7EC7\u540D\u79F0"}),rules:[{required:!0,message:"".concat(M.formatMessage({id:"form.rules.message",defaultMessage:"\u8BF7\u8F93\u5165"}),"${label}")}]}),(0,e.jsx)(be,{title:"\u4E3A\u7EC4\u7EC7\u5206\u914D\u53EF\u7528\u89D2\u8272",width:"md",label:M.formatMessage({id:"DisplayName:IdentityRole",defaultMessage:"\u4E3A\u7EC4\u7EC7\u5206\u914D\u53EF\u7528\u89D2\u8272"})}),(0,e.jsx)(Te,{width:"md",name:"leaderId",label:M.formatMessage({id:"DisplayName:JhOrganizationUnit:LeaderId",defaultMessage:"\u8D1F\u8D23\u4EBA"})})]})})})})},Ee=_e,Ge=t(69056),$e=function(){var f=(0,ne.md)(),w=(0,n.useState)(!1),x=(0,P.Z)(w,2),g=x[0],S=x[1],T=(0,n.useState)(b.cI.Detail),C=(0,P.Z)(T,2),D=C[0],E=C[1],d=te.Z.confirm,h=(0,ne.YB)(),M=(0,n.useRef)(),se=(0,n.useState)(0),J=(0,P.Z)(se,2),ie=J[0],ue=J[1],oe=(0,n.useState)([]),K=(0,P.Z)(oe,2),I=K[0],W=K[1],B=(0,n.useState)([]),Y=(0,P.Z)(B,2),F=Y[0],H=Y[1],L=(0,n.useState)(null),le=(0,P.Z)(L,2),R=le[0],he=le[1],ze=(0,n.useState)(void 0),ge=(0,P.Z)(ze,2),Be=ge[0],ce=ge[1],Fe=(0,n.useState)(!1),ye=(0,P.Z)(Fe,2),xe=ye[0],Ne=ye[1],Q=function(){var s;(s=M.current)===null||s===void 0||s.reload(),W([])},Je=function(){var p=(0,y.Z)(u().mark(function s(){var i;return u().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(F.length!=0){l.next=6;break}return l.next=3,(0,b.sQ)();case 3:return i=l.sent,H(i),l.abrupt("return",i);case 6:return l.abrupt("return",F);case 7:case"end":return l.stop()}},s)}));return function(){return p.apply(this,arguments)}}(),Ke=function(){var p=(0,y.Z)(u().mark(function s(i){return u().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:i.isDeleted?d({icon:(0,e.jsx)(c.Z,{}),content:(0,e.jsx)(e.Fragment,{children:h.formatMessage({id:"proTable.delete.Recover",defaultMessage:"\u786E\u5B9A\u8981\u6062\u590D\u5417?"})}),onOk:function(){var m=(0,y.Z)(u().mark(function z(){return u().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:return Z.next=2,$.tj(i.id);case 2:Q();case 3:case"end":return Z.stop()}},z)}));function A(){return m.apply(this,arguments)}return A}(),onCancel:function(){}}):d({icon:(0,e.jsx)(c.Z,{}),content:(0,e.jsx)(e.Fragment,{children:h.formatMessage({id:"proTable.delete.Delete",defaultMessage:"\u786E\u5B9A\u8981\u5220\u9664\u5417?"})}),onOk:function(){var m=(0,y.Z)(u().mark(function z(){return u().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:return Z.next=2,$.xT(i.id);case 2:Q();case 3:case"end":return Z.stop()}},z)}));function A(){return m.apply(this,arguments)}return A}(),onCancel:function(){}});case 1:case"end":return l.stop()}},s)}));return function(i){return p.apply(this,arguments)}}(),We=function(){S(!1)},Ye=function(){S(!1),Q(),Ne(!xe)},Le=function(){E(b.cI.Add),S(!0),ce(void 0)},Qe=function(){var p=(0,y.Z)(u().mark(function s(){return u().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:I.length>0?d({icon:(0,e.jsx)(c.Z,{}),content:(0,e.jsx)(e.Fragment,{children:h.formatMessage({id:"proTable.delete.BatchDelete",defaultMessage:"\u786E\u5B9A\u8981\u5220\u9664\u9009\u4E2D\u9879\u5417?"})}),onOk:function(){var l=(0,y.Z)(u().mark(function A(){return u().wrap(function(G){for(;;)switch(G.prev=G.next){case 0:return G.next=2,$.eB(I);case 2:Q();case 3:case"end":return G.stop()}},A)}));function m(){return l.apply(this,arguments)}return m}(),onCancel:function(){}}):me.default.warning(h.formatMessage({id:"message.select.required",defaultMessage:"\u8BF7\u9009\u62E9\u64CD\u4F5C\u9879"}));case 1:case"end":return v.stop()}},s)}));return function(){return p.apply(this,arguments)}}(),Ie=function(){var p=(0,y.Z)(u().mark(function s(i){var v;return u().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return S(!0),m.next=3,$.dX(i.id);case 3:v=m.sent,ce(v);case 5:case"end":return m.stop()}},s)}));return function(i){return p.apply(this,arguments)}}(),Ve=function(){var p=(0,y.Z)(u().mark(function s(i){return u().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return E(b.cI.Edit),l.next=3,Ie(i);case 3:case"end":return l.stop()}},s)}));return function(i){return p.apply(this,arguments)}}(),Xe=function(){var p=(0,y.Z)(u().mark(function s(i){return u().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return E(b.cI.Detail),l.next=3,Ie(i);case 3:case"end":return l.stop()}},s)}));return function(i){return p.apply(this,arguments)}}();(0,n.useEffect)(function(){ce(void 0)},[g]);var He=[{title:h.formatMessage({id:"DisplayName:JhOrganizationUnit:DisplayName",defaultMessage:"\u7EC4\u7EC7\u540D\u79F0"}),dataIndex:"displayName"},{title:h.formatMessage({id:"DisplayName:JhOrganizationUnit:LeaderId",defaultMessage:"\u7EC4\u7EC7\u8D1F\u8D23\u4EBA"}),dataIndex:"leaderName"},{title:h.formatMessage({id:"JhAbp:IsDeleted",defaultMessage:"\u662F\u5426\u5220\u9664"}),dataIndex:"isDeleted",search:!1,render:function(s,i){return(0,e.jsx)(fe.Z,{disabled:!(f["AbpIdentity.OrganizationUnits.Recover"]&&f["AbpIdentity.OrganizationUnits.Delete"]),checked:i.isDeleted,onChange:function(){return Ke(i)}})}},{title:h.formatMessage({id:"JhAbp:CreationTime",defaultMessage:"\u521B\u5EFA\u65F6\u95F4"}),dataIndex:"creationTime",valueType:"dateTime",search:!1,sorter:!0},{title:h.formatMessage({id:"JhAbp:Operation",defaultMessage:"\u64CD\u4F5C"}),key:"option",valueType:"option",render:function(s,i){return!i.isDeleted&&[f["AbpIdentity.OrganizationUnits.Update"]&&(0,e.jsx)("a",{onClick:function(){return Ve(i)},children:h.formatMessage({id:"Permission:Edit",defaultMessage:"\u7F16\u8F91"})},"edit"),(0,e.jsx)("a",{onClick:function(){return Xe(i)},children:h.formatMessage({id:"Permission:Detail",defaultMessage:"\u8BE6\u60C5"})},"detail")]}},{title:h.formatMessage({id:"JhAbp:IsDeleted",defaultMessage:"\u662F\u5426\u5220\u9664"}),dataIndex:"deleted",hideInTable:!0,valueType:"select",initialValue:2,request:Je}],qe=function(){var p=(0,y.Z)(u().mark(function s(i,v){var l,m,A,z,G,Z;return u().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:l=[],m=new Object(v);for(A in m)m.hasOwnProperty(A)&&(z=v[A],l.push("".concat(A," ").concat(z.replace("end",""))));return G=(0,_.Z)((0,_.Z)({},i),{},{sorting:l.join(","),code:R}),N.next=6,$.GJ(G);case 6:return Z=N.sent,ue(Z.totalCount),N.abrupt("return",{data:Z.items,success:!0});case 9:case"end":return N.stop()}},s)}));return function(i,v){return p.apply(this,arguments)}}(),et={selectedRowKeys:I,onChange:function(s){return W(s)}},tt=function(){var p=(0,y.Z)(u().mark(function s(i,v){return u().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:i.length>0?he(v.node.data.code):he(null),Q();case 2:case"end":return m.stop()}},s)}));return function(i,v){return p.apply(this,arguments)}}(),nt=(0,n.useMemo)(function(){return{labelWidth:100,searchText:h.formatMessage({id:"proTable.search.searchText",defaultMessage:"\u67E5\u8BE2"}),resetText:h.formatMessage({id:"proTable.search.resetText",defaultMessage:"\u91CD\u7F6E"})}},[h]);return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(a.ZP,{children:(0,e.jsxs)(q.Z,{gutter:{md:16},children:[(0,e.jsx)(ee.Z,{xs:24,sm:6,children:(0,e.jsx)(Ge.Z,{onSelect:tt,reload:xe})}),(0,e.jsx)(ee.Z,{xs:24,sm:18,children:(0,e.jsx)(o.ZP,{actionRef:M,columns:He,rowSelection:et,request:function(s,i){return qe(s,i)},rowKey:"id",pagination:{pageSize:10,total:ie},dateFormatter:"string",toolBarRender:function(){return[f["AbpIdentity.OrganizationUnits.Create"]&&(0,e.jsxs)(U.Z,{type:"primary",shape:"round",onClick:Le,children:[(0,e.jsx)(r.Z,{}),h.formatMessage({id:"Permission:Create",defaultMessage:"\u521B\u5EFA"})]},"create"),f["AbpIdentity.OrganizationUnits.BatchDelete"]&&(0,e.jsxs)(U.Z,{type:"default",shape:"round",danger:!0,onClick:Qe,children:[(0,e.jsx)(j.Z,{}),h.formatMessage({id:"Permission:BatchDelete",defaultMessage:"\u6279\u91CF\u5220\u9664"})]},"delete_keys")]},search:nt})})]})}),(0,e.jsx)(Ee,{operator:D,visible:g,current:Be,onCancel:We,onSubmit:Ye})]})},ke=$e},52146:function(Oe,V,t){"use strict";t.d(V,{Tp:function(){return de},et:function(){return pe},GJ:function(){return y},dX:function(){return te},_m:function(){return P},Ur:function(){return u}});var k=t(3182),q=t(94043),O=t.n(q),U=t(21010),de=function(){var n=(0,k.Z)(O().mark(function a(o){return O().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return o.extraProperties||(o.extraProperties={}),r.next=3,(0,U.WY)("".concat(Identity_API,"api/v1/IdentityRole/roles"),{method:"Post",data:o});case 3:return r.abrupt("return",r.sent);case 4:case"end":return r.stop()}},a)}));return function(o){return n.apply(this,arguments)}}(),ee=null,_=null,we=null,fe=null,pe=function(){var n=(0,k.Z)(O().mark(function a(o,c){return O().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.next=2,(0,U.WY)("".concat(Identity_API,"api/identity/roles/").concat(o),{method:"Put",data:c});case 2:return j.abrupt("return",j.sent);case 3:case"end":return j.stop()}},a)}));return function(o,c){return n.apply(this,arguments)}}(),me=null,y=function(){var n=(0,k.Z)(O().mark(function a(o){return O().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,U.WY)("".concat(Identity_API,"api/v1/IdentityRole"),{method:"Get",params:o});case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}},a)}));return function(o){return n.apply(this,arguments)}}(),Ce=null,te=function(){var n=(0,k.Z)(O().mark(function a(o){return O().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,U.WY)("".concat(Identity_API,"api/v1/IdentityRole/").concat(o),{method:"Get"});case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}},a)}));return function(o){return n.apply(this,arguments)}}(),P=function(){var n=(0,k.Z)(O().mark(function a(o){return O().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,U.WY)("".concat(Identity_API,"api/v1/IdentityRole/options"),{method:"Get",params:{name:o}});case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}},a)}));return function(o){return n.apply(this,arguments)}}(),ve=null,u=function(){var n=(0,k.Z)(O().mark(function a(){return O().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,(0,U.WY)("".concat(Identity_API,"api/v1/IdentityRole/Trees"),{method:"Get"});case 2:return c.abrupt("return",c.sent);case 3:case"end":return c.stop()}},a)}));return function(){return n.apply(this,arguments)}}()}}]);
